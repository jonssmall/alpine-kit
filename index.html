<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alpine + Hamburger Integration</title>
</head>

<body>
  <div x-data="mobileMenu()">
    <!-- Mobile menu with hamburger button -->
    <div class="flex items-center justify-between p-4 bg-gray-100">
      <h1 class="text-xl font-bold">My App</h1>
      
      <!-- Hamburger button that controls Alpine state -->
      <hamburger-button 
        x-ref="hamburger"
        color="blue" 
        size="md"
        @hamburger-toggle="handleToggle($event)"
      ></hamburger-button>
    </div>

    <!-- Mobile menu that responds to hamburger state -->
    <nav 
      class="mobile-nav bg-white shadow-lg transition-all duration-300 ease-in-out overflow-hidden"
      :class="isMenuOpen ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'"
      x-show="isMenuOpen"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 scale-95"
      x-transition:enter-end="opacity-100 scale-100"
      x-transition:leave="transition ease-in duration-75"
      x-transition:leave-start="opacity-100 scale-100"
      x-transition:leave-end="opacity-0 scale-95"
    >
      <ul class="py-2">
        <li><a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Home</a></li>
        <li><a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">About</a></li>
        <li><a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Services</a></li>
        <li><a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Contact</a></li>
      </ul>
    </nav>

    <!-- Debug info -->
    <div class="p-4 mt-4 bg-gray-50 rounded">
      <p class="text-sm text-gray-600">
        Menu State: <span x-text="isMenuOpen ? 'Open' : 'Closed'" class="font-semibold"></span>
      </p>
      <p class="text-sm text-gray-600">
        Toggle Count: <span x-text="toggleCount" class="font-semibold"></span>
      </p>
    </div>

    <!-- Control buttons -->
    <div class="p-4 space-x-4">
      <button 
        @click="openMenu()" 
        class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
      >
        Open Menu
      </button>
      <button 
        @click="closeMenu()" 
        class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
      >
        Close Menu
      </button>
    </div>
  </div>

  <script>
    function mobileMenu() {
      return {
        isMenuOpen: false,
        toggleCount: 0,
        
        init() {
          console.log('Mobile menu initialized');
        },
        
        handleToggle(event) {
          console.log('Hamburger toggled:', event.detail);
          this.isMenuOpen = event.detail.isOpen;
          this.toggleCount++;
          
          // You can add additional logic here
          if (this.isMenuOpen) {
            document.body.style.overflow = 'hidden'; // Prevent scrolling
          } else {
            document.body.style.overflow = '';
          }
        },
        
        // Programmatically control the hamburger from Alpine
        openMenu() {
          console.log('Opening menu...');
          const hamburger = this.$refs.hamburger;
          if (hamburger && hamburger.open) {
            hamburger.open();
          } else {
            console.error('Hamburger button not found or no open method');
          }
        },
        
        closeMenu() {
          console.log('Closing menu...');
          const hamburger = this.$refs.hamburger;
          if (hamburger && hamburger.close) {
            hamburger.close();
          } else {
            console.error('Hamburger button not found or no close method');
          }
        }
      }
    }
  </script>

  <!-- Vite Entry Point -->
  <script type="module" src="/src/main.js"></script>
</body>

</html>